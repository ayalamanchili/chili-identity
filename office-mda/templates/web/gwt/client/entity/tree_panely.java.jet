
<java:format>
<f:bundle basename="templates/resources/messages">
<f:message>copyright</f:message>
<c:setVariable select="$class/@xmi.id" var="classID"/>


package ${$packageName}.${lower-case($class/@name)};
import ${$webPackage}${camelCase($projectName)}Welcome;
import info.yalamanchili.gwt.callback.ALAsyncCallback;
import info.yalamanchili.gwt.composite.TreePanelCompositey;
import info.yalamanchili.gwt.widgets.ClickableLink;
import info.yalamanchili.gwt.beans.MultiSelectObjy;
import com.google.gwt.user.client.Window;
import info.yalamanchili.gwt.rf.GenericRequest;
import java.util.List;
import info.yalamanchili.gwt.composite.OptionsComposite.OptionsCompositeType;			
import com.google.web.bindery.requestfactory.shared.Receiver;
import ${$groupID}.entity.${lower-case($package/@name)}.${$class/@name};
<%--process level 1 generizations --%>
<c:if test="not($class/@name = $parentClass1/@name)">
  			<c:setVariable select="$parentClass1/@xmi.id" var="classID"/>
  			import ${$groupID}.client.${lower-case($package/@name)}.${lower-case($parentClass1/@name)}.TreeAbstract${$parentClass1/@name}Panely;
  							<%-- process the assocations for level 1 class --%>
							<c:iterate select="/XMI/XMI.content/Model/Namespace.ownedElement/Package/Namespace.ownedElement/Association" var="association">
								<c:iterate select="$association/Association.connection" var="association_connection">
									<c:iterate select="$association_connection/AssociationEnd" var="association_connection_end">
										<c:setVariable select="$association_connection_end/AssociationEnd.participant/Class/@xmi.idref" var="association_connection_end_classID" />
												<%-- process only compositions or aggegations--%>
													<c:if test="not($association_connection_end/@aggregation = 'none')">
							  					   	<%-- iterate over the iterations ends  --%>
							  					  	 <c:iterate select="$association_connection/AssociationEnd" var="association_connection_end2">
							  					  	 <%-- process only non composits or non aggregations and --%>
  					  								<c:if test="$association_connection_end2/@aggregation = 'none'">
							  					  	 <c:setVariable select="$association_connection_end2/AssociationEnd.participant/Class/@xmi.idref" var="association_connection_end_classID2" />
							  					  	 	<%-- get the end secondary end with other class  --%>
							  					  		 	<c:if test="not($association_connection_end_classID2 = $classID)"> 
							  					  		 	<%-- iterate throught all the classes to get the other class on the association--%>
							  					  		 		<c:iterate select="/XMI/XMI.content/Model/Namespace.ownedElement/Package/Namespace.ownedElement/Class" var="class2">
							  					  		 			<c:if test="$class2/@xmi.id = $association_connection_end_classID2"> 
							  					  		 			import ${$groupID}.entity.${lower-case($package/@name)}.${$class2/@name};
							  					  		 			import ${$groupID}.client.${lower-case($package/@name)}.${lower-case($class2/@name)}.${$class2/@name}Proxy;
							  					  		 			import ${$groupID}.client.${lower-case($package/@name)}.${lower-case($class2/@name)}.ReadAll${$class2/@name}sPanely;
							  					  		 			import ${$groupID}.client.${lower-case($package/@name)}.${lower-case($class2/@name)}.${$class2/@name}OptionsPanel;
							  					  		 			import ${$groupID}.client.${lower-case($package/@name)}.${lower-case($class2/@name)}.Select${$class2/@name}Panely;							  					  		 		
							  					  		 			</c:if> 
							  					  		 		</c:iterate>
							  							  	</c:if>
							  							  	</c:if> 
							  					 	  </c:iterate> 
							  					 	 </c:if> 					 	 				 	  											
									</c:iterate>
								</c:iterate>
							</c:iterate> 
</c:if>
<%--process level 2 generizations --%>
<c:if test="not($class/@name = $parentClass2/@name)">
  			<c:setVariable select="$parentClass2/@xmi.id" var="classID"/>
  			import ${$groupID}.client.${lower-case($package/@name)}.${lower-case($parentClass2/@name)}.TreeAbstract${$parentClass2/@name}Panely;
  							<%-- process the assocations for level 2 class --%>
							<c:iterate select="/XMI/XMI.content/Model/Namespace.ownedElement/Package/Namespace.ownedElement/Association" var="association">
								<c:iterate select="$association/Association.connection" var="association_connection">
									<c:iterate select="$association_connection/AssociationEnd" var="association_connection_end">
										<c:setVariable select="$association_connection_end/AssociationEnd.participant/Class/@xmi.idref" var="association_connection_end_classID" />
												<%-- process only compositions or aggegations--%>
													<c:if test="not($association_connection_end/@aggregation = 'none')">
							  					   	<%-- iterate over the iterations ends  --%>
							  					  	 <c:iterate select="$association_connection/AssociationEnd" var="association_connection_end2">
							  					  	 <%-- process only non composits or non aggregations and --%>
  					  								<c:if test="$association_connection_end2/@aggregation = 'none'">
							  					  	 <c:setVariable select="$association_connection_end2/AssociationEnd.participant/Class/@xmi.idref" var="association_connection_end_classID2" />
							  					  	 	<%-- get the end secondary end with other class  --%>
							  					  		 	<c:if test="not($association_connection_end_classID2 = $classID)"> 
							  					  		 	<%-- iterate throught all the classes to get the other class on the association--%>
							  					  		 		<c:iterate select="/XMI/XMI.content/Model/Namespace.ownedElement/Package/Namespace.ownedElement/Class" var="class2">
							  					  		 			<c:if test="$class2/@xmi.id = $association_connection_end_classID2"> 
							  					  		 			import ${$groupID}.entity.${lower-case($package/@name)}.${$class2/@name};
							  					  		 			import ${$groupID}.client.${lower-case($package/@name)}.${lower-case($class2/@name)}.${$class2/@name}Proxy;
							  					  		 			import ${$groupID}.client.${lower-case($package/@name)}.${lower-case($class2/@name)}.ReadAll${$class2/@name}sPanely;
							  					  		 			import ${$groupID}.client.${lower-case($package/@name)}.${lower-case($class2/@name)}.${$class2/@name}OptionsPanel;
							  					  		 			import ${$groupID}.client.${lower-case($package/@name)}.${lower-case($class2/@name)}.Select${$class2/@name}Panely;							  					  		 		
							  					  		 			</c:if>							  					  		 		
							  					  		 			</c:iterate>
							  							  	</c:if>
							  							  	</c:if> 
							  					 	  </c:iterate> 
							  					 	 </c:if> 					 	 				 	  											
									</c:iterate>
								</c:iterate>
							</c:iterate> 
</c:if>				

<c:setVariable select="$class/@xmi.id" var="classID"/>
<%--process 0 level class relations --%>
<c:iterate select="/XMI/XMI.content/Model/Namespace.ownedElement/Package/Namespace.ownedElement/Association" var="association">
	<c:iterate select="$association/Association.connection" var="association_connection">
		<c:iterate select="$association_connection/AssociationEnd" var="association_connection_end">
			<c:setVariable select="$association_connection_end/AssociationEnd.participant/Class/@xmi.idref" var="association_connection_end_classID" />
		<%-- check is the association is corresponding to the class  --%>
					<c:if test="$association_connection_end_classID = $classID">
  					   	<%-- iterate over the iterations ends  --%>
  					  	 <c:iterate select="$association_connection/AssociationEnd" var="association_connection_end2">
  					  	 <%-- process only non composits or non aggregations and --%>
  					  	<c:if test="$association_connection_end2/@aggregation = 'none'">
  					  	 <c:setVariable select="$association_connection_end2/AssociationEnd.participant/Class/@xmi.idref" var="association_connection_end_classID2" />
  					  	 	<%-- get the end secondary end with other class  --%>
  					  		 	<c:if test="not($association_connection_end_classID2 = $classID)"> 
  					  		 	<%-- iterate throught all the classes to get the other class on the association--%>
  					  		 		<c:iterate select="/XMI/XMI.content/Model/Namespace.ownedElement/Package/Namespace.ownedElement/Class" var="class2">
  					  		 			<c:if test="$class2/@xmi.id = $association_connection_end_classID2"> 
  					  		 										import ${$groupID}.entity.${lower-case($package/@name)}.${$class2/@name};
							  					  		 			import ${$groupID}.client.${lower-case($package/@name)}.${lower-case($class2/@name)}.${$class2/@name}Proxy;
							  					  		 			import ${$groupID}.client.${lower-case($package/@name)}.${lower-case($class2/@name)}.ReadAll${$class2/@name}sPanely;
							  					  		 			import ${$groupID}.client.${lower-case($package/@name)}.${lower-case($class2/@name)}.${$class2/@name}OptionsPanel;
							  					  		 			import ${$groupID}.client.${lower-case($package/@name)}.${lower-case($class2/@name)}.Select${$class2/@name}Panely;
							  			</c:if> 
  					  		 		</c:iterate>
  							  	</c:if> 
  							  	</c:if>	
  					 	  </c:iterate> 					 	 				 	  
					</c:if> 											
		</c:iterate>
	</c:iterate>
</c:iterate>
import com.google.gwt.event.dom.client.ClickEvent;
import com.google.gwt.user.client.ui.DockPanel;
import com.google.gwt.user.client.ui.TreeItem;
<f:message>generated.class.comment</f:message>
public class Tree${$class/@name}Panely extends <c:choose select="$parentClass1/@name" > <c:when test="$class/@name" > TreePanelCompositey<${$class/@name}Proxy> </c:when> <c:otherwise> TreeAbstract${$parentClass1/@name}Panely</c:otherwise>  </c:choose> {
<f:message>generated.comment</f:message>
	protected ${$class/@name}Request request;
<f:message>generated.comment</f:message>
	private static Tree${$class/@name}Panely instance;
<f:message>generated.comment</f:message>
	public static Tree${$class/@name}Panely instance() {
		return instance;
	}
<f:message>generated.comment</f:message>
	public Tree${$class/@name}Panely() {
		instance=this;
		initTreePanelComposite("${$groupID}.entity.${lower-case($package/@name)}.${$class/@name}");
	}
<f:message>generated.comment</f:message>
	@Override
	protected void addListeners() {
		// TODO Auto-generated method stub

	}
<f:message>generated.comment</f:message>
	@Override
	protected void addWidgets() {
		// TODO Auto-generated method stub

	}
<f:message>generated.comment</f:message>
	@Override
	protected void configure() {
		// TODO Auto-generated method stub

	}
<f:message>generated.comment</f:message>
	@Override
	public void loadProxyAndRequest() {
		proxy = Read${$class/@name}Panely.instance().getEntity();
		request = ${camelCase($projectName)}Welcome.requestFactory.${lower-case($class/@name)}Request();
	}

<f:message>generated.comment</f:message>
	@Override
	public void treeNodeSelected(final String link) {

<%--process level 1 generizations --%>
<c:if test="not($class/@name = $parentClass1/@name)">
  			<c:setVariable select="$parentClass1/@xmi.id" var="classID"/>		
  							<%-- process the assocations for level 1 class --%>
							<c:iterate select="/XMI/XMI.content/Model/Namespace.ownedElement/Package/Namespace.ownedElement/Association" var="association">
								<c:iterate select="$association/Association.connection" var="association_connection">
									<c:iterate select="$association_connection/AssociationEnd" var="association_connection_end">
										<c:setVariable select="$association_connection_end/AssociationEnd.participant/Class/@xmi.idref" var="association_connection_end_classID" />
											<%-- check is the association is corresponding to the class  --%>
												<c:if test="$association_connection_end_classID = $classID">
							  					   	<%-- iterate over the iterations ends  --%>
							  					  	 <c:iterate select="$association_connection/AssociationEnd" var="association_connection_end2">
							  					  	 <%-- process only non composits or non aggregations and --%>
  					  								<c:if test="$association_connection_end2/@aggregation = 'none'">
							  					  	 <c:setVariable select="$association_connection_end2/AssociationEnd.participant/Class/@xmi.idref" var="association_connection_end_classID2" />
							  					  	 	<%-- get the end secondary end with other class  --%>
							  					  		 	<c:if test="not($association_connection_end/@xmi.id = $association_connection_end2/@xmi.id)"> 
										  					 <%-- check to see if this is a navigable relation--%>
										  					 <c:if test="$association_connection_end2/@isNavigable = 'true'">										  					  		 	 
							  					  		 	<%-- iterate throught all the classes to get the other class on the association--%>
							  					  		 		<c:iterate select="/XMI/XMI.content/Model/Namespace.ownedElement/Package/Namespace.ownedElement/Class" var="class2">
							  					  		 			<c:if test="$class2/@xmi.id = $association_connection_end_classID2"> 
							  					  		 			if (${$class2/@name}.class.getName().contains(link)) {
							  					  		 			<%--for composite add --%>
																		<c:if test="$association_connection_end/@aggregation = 'composite'">
																			
																			request.get${$class2/@name}s(proxy.getId()).fire(
																					new Receiver<List<${$class2/@name}Proxy>>() {
																
																						@Override
																						public void onSuccess(List<${$class2/@name}Proxy> arg0) {
																								ReadAll${$class2/@name}sPanely readAll${$class2/@name}sPanel= new ReadAll${$class2/@name}sPanely(arg0);
																								readAll${$class2/@name}sPanel.parentTreeClass = link;																				
																								${camelCase($projectName)}Welcome.instance().getEntityPanel()
																								.clear();
																								${camelCase($projectName)}Welcome.instance().getEntityPanel().add(readAll${$class2/@name}sPanel);
																								${camelCase($projectName)}Welcome.instance().getEntityPanel().add(
																														new ${$class2/@name}OptionsPanel(
																														OptionsCompositeType.ADD));
																						}
																
																					});																		
																		</c:if>
							  					  		 			<%--for non composite add_all --%>
																		<c:if test="not($association_connection_end/@aggregation = 'composite')">
																				String[] ${lower-case($class2/@name)}Columns = { 
																			<c:iterate select="$class2/Classifier.feature/Attribute" var="attribute">
																			<%-- processes the premitive Datatypes --%>
																				 <c:choose select="$attribute/StructuralFeature.type/DataType/@href" > <c:when test="${'$StringID'}" > "${$attribute/@name}", </c:when> 
																			</c:choose> 
																			</c:iterate>	
																				 };
																			${$packageName}.${lower-case($class/@name)}.${$class/@name}Service.${$class/@name}ServiceAsync.instance().get${$class2/@name}sMultiSelect(
																			entity.getId(),${lower-case($class2/@name)}Columns,new ALAsyncCallback<MultiSelectObjy>() {
																											@Override
																											public void onResponse(MultiSelectObjy arg0) {																			
																												${camelCase($projectName)}Welcome.instance().getEntityPanel()
																												.clear();
																												${camelCase($projectName)}Welcome.instance().getEntityPanel()..add(new Select${$class2/@name}Panely("${$class2/@name}s",Tree${$class/@name}Panely.this,arg0));																			
																											}
																				
																										});
																		</c:if>																										  					  		 			
																	}
							  					  		 			</c:if> 
							  					  		 		</c:iterate>
							  							  	</c:if> 
							  							  	</c:if>
							  							  	</c:if>  
							  					 	  </c:iterate> 
							  					 						 	 				 	  
												</c:if> 											
									</c:iterate>
								</c:iterate>
							</c:iterate> 
</c:if>
<%--process level 2 generizations --%>
<c:if test="not($class/@name = $parentClass2/@name)">
  			<c:setVariable select="$parentClass2/@xmi.id" var="classID"/>		
  							<%-- process the assocations for level 1 class --%>
							<c:iterate select="/XMI/XMI.content/Model/Namespace.ownedElement/Package/Namespace.ownedElement/Association" var="association">
								<c:iterate select="$association/Association.connection" var="association_connection">
									<c:iterate select="$association_connection/AssociationEnd" var="association_connection_end">
										<c:setVariable select="$association_connection_end/AssociationEnd.participant/Class/@xmi.idref" var="association_connection_end_classID" />
											<%-- check is the association is corresponding to the class  --%>
												<c:if test="$association_connection_end_classID = $classID">
							  					   	<%-- iterate over the iterations ends  --%>
							  					  	 <c:iterate select="$association_connection/AssociationEnd" var="association_connection_end2">
							  					  	 <%-- process only non composits or non aggregations and --%>
  					  								<c:if test="$association_connection_end2/@aggregation = 'none'">
							  					  	 <c:setVariable select="$association_connection_end2/AssociationEnd.participant/Class/@xmi.idref" var="association_connection_end_classID2" />
							  					  	 	<%-- get the end secondary end with other class  --%>
							  					  		 	<c:if test="not($association_connection_end/@xmi.id = $association_connection_end2/@xmi.id)"> 
										  					 <%-- check to see if this is a navigable relation--%>
										  					 <c:if test="$association_connection_end2/@isNavigable = 'true'">										  					  		 	 
							  					  		 	<%-- iterate throught all the classes to get the other class on the association--%>
							  					  		 		<c:iterate select="/XMI/XMI.content/Model/Namespace.ownedElement/Package/Namespace.ownedElement/Class" var="class2">
							  					  		 			<c:if test="$class2/@xmi.id = $association_connection_end_classID2"> 
								  					  		 			if (${$class2/@name}.class.getName().contains(link)) {
							  					  		 			<%--for composite add --%>
																		<c:if test="$association_connection_end/@aggregation = 'composite'">
																			
																			request.get${$class2/@name}s(proxy.getId()).fire(
																					new Receiver<List<${$class2/@name}Proxy>>() {
																
																						@Override
																						public void onSuccess(List<${$class2/@name}Proxy> arg0) {
																								ReadAll${$class2/@name}sPanely readAll${$class2/@name}sPanel= new ReadAll${$class2/@name}sPanely(arg0);
																								readAll${$class2/@name}sPanel.parentTreeClass = link;																				
																								${camelCase($projectName)}Welcome.instance().getEntityPanel()
																								.clear();
																								${camelCase($projectName)}Welcome.instance().getEntityPanel().add(readAll${$class2/@name}sPanel);
																								${camelCase($projectName)}Welcome.instance().getEntityPanel().add(
																														new ${$class2/@name}OptionsPanel(
																														OptionsCompositeType.ADD));
																						}
																
																					});	
																		</c:if>
							  					  		 			<%--for non composite add_all --%>
																		<c:if test="not($association_connection_end/@aggregation = 'composite')">
																				String[] ${lower-case($class2/@name)}Columns = { 
																			<c:iterate select="$class2/Classifier.feature/Attribute" var="attribute">
																			<%-- processes the premitive Datatypes --%>
																				 <c:choose select="$attribute/StructuralFeature.type/DataType/@href" > <c:when test="${'$StringID'}" > "${$attribute/@name}", </c:when> 
																			</c:choose> 
																			</c:iterate>	
																				 };
																			${$packageName}.${lower-case($class/@name)}.${$class/@name}Service.${$class/@name}ServiceAsync.instance().get${$class2/@name}sMultiSelect(
																			proxy.getId(),${lower-case($class2/@name)}Columns,new ALAsyncCallback<MultiSelectObjy>() {
																											@Override
																											public void onResponse(MultiSelectObjy arg0) {																			
																												${camelCase($projectName)}Welcome.instance().getEntityPanel()
																												.clear();
																											${camelCase($projectName)}Welcome.instance().getEntityPanel()..add(new Select${$class2/@name}Panely("${$class2/@name}s",Tree${$class/@name}Panely.this,arg0));	
																											}
																				
																										});
																		</c:if>	
																	}

							  					  		 			</c:if> 
							  					  		 		</c:iterate>
							  							  	</c:if> 
							  							  	</c:if>
							  							  	</c:if>
							  					 	  </c:iterate> 
							  					 						 	 				 	  
												</c:if> 											
									</c:iterate>
								</c:iterate>
							</c:iterate> 
</c:if> 

<c:setVariable select="$class/@xmi.id" var="classID"/>
<%--process 0 level class relations --%>
<c:iterate select="/XMI/XMI.content/Model/Namespace.ownedElement/Package/Namespace.ownedElement/Association" var="association">
	<c:iterate select="$association/Association.connection" var="association_connection">
		<c:iterate select="$association_connection/AssociationEnd" var="association_connection_end">
			<c:setVariable select="$association_connection_end/AssociationEnd.participant/Class/@xmi.idref" var="association_connection_end_classID" />
		<%-- check is the association is corresponding to the class  --%>
					<c:if test="$association_connection_end_classID = $classID">
  					   	<%-- iterate over the iterations ends  --%>
  					  	 <c:iterate select="$association_connection/AssociationEnd" var="association_connection_end2">
  					  	 <%-- process only non composits or non aggregations and --%>
  					  	 <c:if test="$association_connection_end2/@aggregation = 'none'">
  					  	 <c:setVariable select="$association_connection_end2/AssociationEnd.participant/Class/@xmi.idref" var="association_connection_end_classID2" />
  					  	 	<%-- get the end secondary end with other class  --%>
  					  		 	<c:if test="not($association_connection_end/@xmi.id = $association_connection_end2/@xmi.id)"> 
  					  		 	<%-- check to see if this is a navigable relation--%>
  					  		 	<c:if test="$association_connection_end2/@isNavigable = 'true'">
  					  		 	<%-- process many on target--%>
								<c:if test="$association_connection_end2/AssociationEnd.multiplicity/Multiplicity/Multiplicity.range/MultiplicityRange/@lower = 0">
  								<c:if test="$association_connection_end2/AssociationEnd.multiplicity/Multiplicity/Multiplicity.range/MultiplicityRange/@upper = -1">
  					  		 	<%-- iterate throught all the classes to get the other class on the association--%>
  					  		 		<c:iterate select="/XMI/XMI.content/Model/Namespace.ownedElement/Package/Namespace.ownedElement/Class" var="class2">
  					  		 			<c:if test="$class2/@xmi.id = $association_connection_end_classID2"> 
							  					  		 			if (${$class2/@name}.class.getName().contains(link)) {
							  					  		 			<%--for composite add --%>
																		<c:if test="$association_connection_end/@aggregation = 'composite'">
																			
																			request.get${$class2/@name}s(proxy.getId()).fire(
																					new Receiver<List<${$class2/@name}Proxy>>() {
																
																						@Override
																						public void onSuccess(List<${$class2/@name}Proxy> arg0) {
																								ReadAll${$class2/@name}sPanely readAll${$class2/@name}sPanel= new ReadAll${$class2/@name}sPanely(arg0);
																								readAll${$class2/@name}sPanel.parentTreeClass = link;																				
																								${camelCase($projectName)}Welcome.instance().getEntityPanel()
																								.clear();
																								${camelCase($projectName)}Welcome.instance().getEntityPanel().add(readAll${$class2/@name}sPanel);
																								${camelCase($projectName)}Welcome.instance().getEntityPanel().add(
																														new ${$class2/@name}OptionsPanel(
																														OptionsCompositeType.ADD));
																						}
																
																					});	
																		</c:if>
							  					  		 			<%--for non composite add_all --%>
																		<c:if test="not($association_connection_end/@aggregation = 'composite')">
																				String[] ${lower-case($class2/@name)}Columns = { 
																			<c:iterate select="$class2/Classifier.feature/Attribute" var="attribute">
																			<%-- processes the premitive Datatypes --%>
																				 <c:choose select="$attribute/StructuralFeature.type/DataType/@href" > <c:when test="${'$StringID'}" > "${$attribute/@name}", </c:when> 
																			</c:choose> 
																			</c:iterate>	
																				 };
																			${$packageName}.${lower-case($class/@name)}.${$class/@name}Service.${$class/@name}ServiceAsync.instance().get${$class2/@name}sMultiSelect(
																			proxy.getId(),${lower-case($class2/@name)}Columns,new ALAsyncCallback<MultiSelectObjy>() {
																											@Override
																											public void onResponse(MultiSelectObjy arg0) {																			
																												${camelCase($projectName)}Welcome.instance().getEntityPanel()
																												.clear();
																											${camelCase($projectName)}Welcome.instance().getEntityPanel().add(new Select${$class2/@name}Panely("${$class2/@name}s",Tree${$class/@name}Panely.this,arg0));
																											}
																				
																										});
																		</c:if>	
																	}

  					  		 			</c:if> 
  					  		 		</c:iterate>
  					  		 	</c:if>	
  							  	</c:if> 
  							  	</c:if>
  							  	</c:if> 
  							  	</c:if>	
  					 	  </c:iterate> 					 	 				 	  
					</c:if> 										
		</c:iterate>
	</c:iterate>
</c:iterate>	
	}
<f:message>generated.comment</f:message>	
@Override
	public void showProxy() {
		
	}
}
</f:bundle>
</java:format>